<!DOCTYPE html>
<html lang="ru">
 <head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript" src="/function.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Главная</title>
<script type="text/javascript">
     ajax.get('/config.setup.json',{},function(response) {
      var jsonFiles = JSON.parse(response);
      var IPaddress = jsonFiles['ip'];   
     }
    //var IPaddress = "192.168.1.35";
    var pin1 = 0;
    var pin2 = 0;
    var pin3 = 0;
    var pin4 = 0;

   function set_pin1(submit){
	if (pin1>=1){
	server = "http://"+IPaddress+"/1On";
	send_request(submit,server);
	document.getElementById("img1src").style.background = "lime";
	pin1--
	} else {
	server = "http://"+IPaddress+"/1Off";
	send_request(submit,server);
	document.getElementById("img1src").style.background = "red";
	pin1++
	}
   }
   function set_pin2(submit){
	if (pin2>=1){
	server = "http://"+IPaddress+"/2On";
	send_request(submit,server);
	document.getElementById("img2src").style.background = "lime";
	pin2--
	} else {
	server = "http://"+IPaddress+"/2Off";
	send_request(submit,server);
	document.getElementById("img2src").style.background = "red";
	pin2++
	}
   }

   function set_pin3(submit){
	if (pin3>=1){
	server ="/addRele1On;
	send_request(submit,server);
	document.getElementById("img3src").style.background = "lime";
	pin3--
	} else {
	server ="/addRele1Off;
	send_request(submit,server);
	document.getElementById("img3src").style.background = "red";
	pin3++
	}
   }
   function set_pin4(submit){
	if (pin4>=1){
	server ="/addRele2On;
	send_request(submit,server);
	document.getElementById("img4src").style.background = "lime";
	pin4--
	} else {
	server ="/addRele2Off;
	send_request(submit,server);
	document.getElementById("img4src").style.background = "red";
	pin4++
	}
   }

   function set_plus(submit){
	server = "http://"+IPaddress+"/3On";
	send_request(submit,server);
	document.getElementById("vent").innerHTML = "Plus";
	}
   function set_minus(submit){
	server = "http://"+IPaddress+"/3Off";
	send_request(submit,server);
	document.getElementById("vent").innerHTML = "Minus";
	}
</script>
 </head>
 <body onload="load();">
  <div class="container">
   <div class="row" style="text-align:center;">
<h4>.</h4>
    <div class="col-sm-offset-2 col-sm-8 col-md-offset-3 col-md-6">
      <h5 class="alert-info" id="ssdp_t">Начальная</h5>
<p style="text-align:right"><img src="logo.gif" height="25" width="25"></p>

<table border="0" width="100%" class="alert alert-dismissible alert-info">
<tr class="alert alert-dismissible alert-warning"><th colspan = "3"></th></tr>
<tr>
  <td width=40%><img id="img1src" src="" height="10" width=100% style="background: Yellow">
		<input type="submit" class="btn btn-block btn-primary" value="Свет 1" onclick="set_pin1(this);">
  </td>
  <td width=20%><img src="./Light.png" height="25" width="25"></td>
  <td width=40%><img id="img2src" src="" height="10"  width=100% style="background: Yellow">
		<input type="submit" class="btn btn-block btn-primary" value="Свет 2" onclick="set_pin2(this);">
  </td>
</tr>
<tr class="alert alert-dismissible alert-warning"><th colspan = "3"></th></tr>
<tr>
  <td width=40%><img id="img3src" src="" height="10" width=100% style="background: Yellow">  
		<input type="submit" class="btn btn-block btn-warning" value="Пин 1" onclick="set_pin3(this);">
  </td>
  <td><img src="./electric.png" height="25" width="25"></td>
  <td width=40%><img id="img4src" src="" height="10" width=100% style="background: Yellow">
		<input type="submit" class="btn btn-block btn-warning" value="Пин 2" onclick="set_pin4(this);">
  </td>
</tr>
<tr class="alert alert-dismissible alert-warning"><th colspan = "3"></th></tr>
<tr>
  <td width=40%>
	<input type="submit" class="btn btn-success" value="Убавить" onclick="set_minus(this);">
  </td>
  <td><p id="vent">{{phDHT}}</p></td>
  <td width=40%>
	<input type="submit" class="btn btn-success" value="Добавить" onclick="set_plus(this);">
  </td>
</tr>
</table>

<table border="0" width="100%" class="alert alert-info">
     	<caption><h4>Показания</h4></caption>
<tr> 
	<td>{{tmHaus}} &#8451;</td>
  <td><img src="./thermo.png" height="25" width="25"></td>
	<td>{{ули}}&#8451;</td>
</tr> 
<tr>
	<td>{{phHaus}}%</td>
  <td><img src="./wetness.png" height="25" width="25"></td>
	<td>{{ули}}%</td>
</tr>
<tr>
	<td>{{ssHaus}} HL</td>
  <td><img src="./candle.png" height="25" width="25"></td>
	<td>{{p}} PH</td>
</tr>
</table>
    <hr>
     <a class="btn btn-block btn-success" href="./budil.htm">Установки</a>
     <a class="btn btn-block btn-danger" href="./setup.htm">Настройки</a>
     <a class="btn btn-block btn-default" href="./edit.htm">Открыть редактор</a>
    </div>
   </div>
  </div>
 </body>
</html>
